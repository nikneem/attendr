<div class="group-details-page">
    <div class="container">
        @if (loading()) {
        <div class="loading-container">
            <p-progressSpinner />
            <p>Loading group details...</p>
        </div>
        } @else if (error()) {
        <div class="error-container">
            <i class="pi pi-exclamation-triangle" style="font-size: 2rem"></i>
            <p>{{ error() }}</p>
        </div>
        } @else if (group()) {
        <div class="group-header">
            <div class="header-content">
                <div class="header-title-section">
                    <h1>{{ group()!.name }}</h1>
                    @if (group()!.isPublic) {
                    <p-tag value="Public" severity="success" icon="pi pi-globe" />
                    } @else {
                    <p-tag value="Private" severity="warn" icon="pi pi-lock" />
                    }
                </div>
                <div class="header-info">
                    <div class="info-item">
                        <i class="pi pi-users"></i>
                        <span>{{ group()!.memberCount }} {{ group()!.memberCount === 1 ? 'member' : 'members' }}</span>
                    </div>
                    @if (!group()!.isMember) {
                    <button pButton [label]="group()!.isPublic ? 'Join Group' : 'Request to Join'"
                        [icon]="group()!.isPublic ? 'pi pi-sign-in' : 'pi pi-send'" (click)="joinGroup()"
                        [loading]="joiningGroup()"></button>
                    }
                </div>
            </div>
        </div>

        <div class="group-sections">
            <attn-group-conferences />

            <attn-group-members [groupId]="groupId()" />

            <div class="pending-section">
                <div class="pending-column">
                    <attn-group-join-requests [groupId]="groupId()" />
                </div>

                <div class="pending-column">
                    <attn-group-invitations [groupId]="groupId()" />
                </div>
            </div>
        </div>
        }
    </div>
</div>