<div class="conference-details-page">
    <div class="container">
        @if (loading) {
        <div class="loading-container">
            <p-progressSpinner />
            <p>Loading conference details...</p>
        </div>
        } @else if (error) {
        <div class="error-container">
            <i class="pi pi-exclamation-triangle" style="font-size: 2rem"></i>
            <p>{{ error }}</p>
        </div>
        } @else if (conference) {
        <div class="conference-header">
            <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="secondary" (click)="openEditDialog()"
                pTooltip="Edit conference" class="edit-button" />
            <div class="header-panel details-panel">
                <div class="panel-overlay"></div>
                <div class="panel-content">
                    <div class="header-title-row">
                        <h1>{{ conference.title }}</h1>
                    </div>
                    <div class="conference-meta">
                        <div class="meta-item">
                            <i class="pi pi-calendar"></i>
                            <span>{{ formatDateRange(conference.startDate, conference.endDate) }}</span>
                        </div>
                        <div class="meta-item">
                            <i class="pi pi-map-marker"></i>
                            <span>{{ conference.city }}, {{ conference.country }}</span>
                        </div>
                        @if (conference.synchronizationSource) {
                        <div class="meta-item">
                            <i class="pi pi-sync"></i>
                            <span>Synced from {{ conference.synchronizationSource.sourceType }}</span>
                        </div>
                        }
                    </div>
                </div>
            </div>

            <div class="header-panel visual-panel"
                [style.background-image]="conference.imageUrl ? 'url(' + conference.imageUrl + ')' : 'none'">
                <div class="panel-overlay"></div>
                @if (!conference.imageUrl) {
                <div class="panel-content placeholder-content">
                    <i class="pi pi-image"></i>
                    <span>No image</span>
                </div>
                }
            </div>
        </div>

        <div class="conference-sections">
            <p-card styleClass="section-card">
                <ng-template pTemplate="header">
                    <div class="section-header">
                        <h2>Schedule</h2>
                    </div>
                </ng-template>
                <attn-conference-schedule [presentations]="conference.presentations" [startDate]="conference.startDate"
                    [endDate]="conference.endDate" />
            </p-card>

            <p-card styleClass="section-card">
                <ng-template pTemplate="header">
                    <div class="section-header">
                        <h2>Speakers</h2>
                    </div>
                </ng-template>
                <attn-speaker-tiles [speakers]="conference.speakers" />
            </p-card>
        </div>

        <p-dialog header="Edit Conference" [(visible)]="showEditDialog" [modal]="true"
            [style]="{ width: '90vw', 'max-width': '600px' }" [draggable]="false" [resizable]="false">
            <attn-edit-conference [conference]="conference" (conferenceUpdated)="onConferenceUpdated()" />
        </p-dialog>
        }
    </div>
</div>