<div class="conferences-page">
    <div class="container">
        <div class="header-section">
            <h1>Upcoming Conferences</h1>
            <button pButton label="Add Conference" icon="pi pi-plus" (click)="onAddConference()"></button>
        </div>

        @if (loading) {
        <div class="loading-container">
            <p-progressSpinner />
            <p>Loading conferences...</p>
        </div>
        } @else if (error) {
        <div class="error-container">
            <i class="pi pi-exclamation-triangle" style="font-size: 2rem"></i>
            <p>{{ error }}</p>
        </div>
        } @else if (conferences.length === 0) {
        <div class="empty-state">
            <i class="pi pi-calendar" style="font-size: 3rem"></i>
            <p>No conferences available</p>
            <button pButton label="Add Your First Conference" icon="pi pi-plus" (click)="onAddConference()"></button>
        </div>
        } @else {
        <div class="conferences-grid">
            @for (conference of conferences; track conference.id) {
            <p-card [styleClass]="'conference-card'" (click)="viewConference(conference.id)">
                <div class="conference-visual"
                    [style.background-image]="conference.imageUrl ? 'url(' + conference.imageUrl + ')' : 'url(/images/attendr-logo-flat.svg)'">
                    <div class="visual-header">
                        <h3 class="visual-title" [pTooltip]="conference.title" tooltipPosition="bottom">{{
                            conference.title }}</h3>
                    </div>
                </div>
                <div class="conference-content">
                    <h3 class="conference-title">{{ conference.title }}</h3>
                    <div class="conference-details">
                        <div class="detail-item">
                            <i class="pi pi-calendar"></i>
                            <span>{{ formatDateRange(conference.startDate, conference.endDate) }}</span>
                        </div>
                        <div class="detail-item">
                            <i class="pi pi-map-marker"></i>
                            <span>{{ conference.city }}, {{ conference.country }}</span>
                        </div>
                    </div>
                </div>
            </p-card>
            }
        </div>
        }
    </div>
</div>

<p-dialog header="Create New Conference" [(visible)]="showCreateDialog" [modal]="true" [style]="{ width: '600px' }"
    [draggable]="false" [resizable]="false">
    <attn-create-conference (conferenceCreated)="onConferenceCreated($event)"></attn-create-conference>
</p-dialog>